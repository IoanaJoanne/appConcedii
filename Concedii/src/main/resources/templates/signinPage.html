<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
 <meta charset="UTF-8" />
 <title> Sign in</title>
<!-- the skeleton framework similar to bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" />
</head>
<body>
	<div id="myPage" class="container">
		<div class="row">
			<div class="twelve columns">
			<!-- this is skeleton grid system -->
			<!-- also skeleton classes for styling -->
				<br><br>
				 <div class="twelve columns align-center">
                    <label for="THEusername">Username</label>
                    <input v-model="username"  type="text"  id="THEusername" />
                    <label for="THEpassword">Password</label>
                    <input v-model="password"  type="password" id="THEpassword" />
                    <br>
                    <input  type="submit" v-on:click="loginMethod" value="submit credentials" />
                </div>
				
				
			</div>

		</div>
	</div>

</body>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://vuejs.org/js/vue.js"></script>
<script>
var app = new Vue({
	  el: '#myPage',
	  data: {username: '',
		  password: ''
	  },
	 
      methods: {
    	  loginMethod(){
    		  
    		   var params = new URLSearchParams();
               params.append('grant_type', 'password');
               params.append('username', this.username);
               params.append('password',this.password);
    		  //axios makes the request to the rest api, binds the vue data to the rest data
              axios({
                  method:'post',
                  url:'oauth/token',
                  auth:{username:'my-client',password:'mysecretvalue'},
                  headers: {"Content-type": "application/x-www-form-urlencoded; charset=utf-8"},
                  data:params
              })
              
              .then(function(response){
                  
            	  document.cookie = "access_token="+response.data.access_token+";path=/";
     //path=/ indicates that the cookie applies to the whole document- this cookie will be set to all urls
            	  //so that later i can retrieve it when i'm on another page and use it to access restricted stuff
            	  //with bearer token authentication using the cookie
            	    
            	  
            	  //redirect to mvc requst to display the view
            	  
                  document.location.replace("/CompanyCalendar");
              });
          }
      }
      
	})



</script>
</html>